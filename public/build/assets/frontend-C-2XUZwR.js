import{a as T}from"./vendor-Dq7h7Pqt.js";window.axios=T;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";document.addEventListener("DOMContentLoaded",function(){const e=document.head.querySelector('meta[name="csrf-token"]');e&&(window.axios.defaults.headers.common["X-CSRF-TOKEN"]=e.content)});let m=!1,p=null;document.addEventListener("livewire:init",()=>{console.log("üî• SAKON Frontend ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô! (Livewire Components)"),Alpine.data("navigation",()=>({scrolled:!1,mobileMenuOpen:!1,init(){this.updateNavigation(),window.addEventListener("scroll",()=>this.updateNavigation()),window.addEventListener("resize",()=>this.handleResize())},updateNavigation(){this.scrolled=window.scrollY>20},handleResize(){window.innerWidth>=1024&&(this.mobileMenuOpen=!1,document.body.style.overflow="")},toggleMobileMenu(){this.mobileMenuOpen=!this.mobileMenuOpen,document.body.style.overflow=this.mobileMenuOpen?"hidden":""},closeMobileMenu(){this.mobileMenuOpen=!1,document.body.style.overflow=""}})),Alpine.data("pageTranslator",()=>({currentLang:localStorage.getItem("selectedLanguage")||"th",translatedCache:new Map,isProcessing:!1,translationProgress:0,batchSize:8,maxConcurrentBatches:2,init(){console.log("üåç PageTranslator initialized with language:",this.currentLang),this.markTranslatableElements(),this.applyCachedTranslations(this.currentLang)},markTranslatableElements(){const e=["nav a:not(.no-translate):not(.notranslate)","h1:not(.no-translate):not(.notranslate)","h2:not(.no-translate):not(.notranslate)","h3:not(.no-translate):not(.notranslate)",".btn:not(.no-translate):not(.notranslate)","button:not(.no-translate):not(.notranslate)",".card-title:not(.no-translate):not(.notranslate)",".menu-item:not(.no-translate):not(.notranslate)",".breadcrumb:not(.no-translate):not(.notranslate)",".badge:not(.no-translate):not(.notranslate)",".alert:not(.no-translate):not(.notranslate)","label:not(.no-translate):not(.notranslate)",".translatable"];let t=0;return e.forEach(n=>{document.querySelectorAll(n).forEach(a=>{this.shouldTranslate(a)&&(a.setAttribute("data-translate","true"),a.getAttribute("data-original")||a.setAttribute("data-original",a.textContent.trim()),t++)})}),console.log(`üìù Marked ${t} priority elements for translation`),t},shouldTranslate(e){const t=e.textContent.trim();if(!t||t.length<2||t.length>200||e.classList.contains("no-translate")||e.classList.contains("notranslate")||e.hasAttribute("translate")&&e.getAttribute("translate")==="no"||e.closest(".no-translate")||e.closest(".notranslate"))return!1;const n=e.tagName.toLowerCase();return!(["script","style","input","textarea","select","code","pre"].includes(n)||/^\d+$/.test(t)||/^[!@#$%^&*(),.?":{}|<>]+$/.test(t)||/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(t)||/^\d{4}-\d{2}-\d{2}$/.test(t)||e.children.length>2)},async translatePage(e){if(this.isProcessing||m){console.log("üö´ Translation already in progress, skipping...");return}this.isProcessing=!0,m=!0,this.translationProgress=0,console.log("üåç Starting translation to:",e);try{e==="th"?(console.log("üîÑ Restoring to Thai (original text)"),this.restoreOriginalText(),this.currentLang="th",localStorage.setItem("selectedLanguage","th"),document.documentElement.lang="th",window.showNotification("‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢‡πÅ‡∏•‡πâ‡∏ß","success")):await this.performTranslation(e)}catch(t){console.error("‚ùå Translation failed:",t),this.handleTranslationError(t)}finally{this.isProcessing=!1,m=!1,this.translationProgress=0}},async performTranslation(e){const t=document.querySelectorAll('[data-translate="true"]'),n=[],a=new Set;if(t.forEach(r=>{const l=r.getAttribute("data-original");if(l&&!a.has(l)){const u=`${l}-${e}`;this.translatedCache.has(u)||(a.add(l),n.push(l))}}),console.log(`üîÑ Reduced from ${t.length} to ${n.length} unique texts`),n.length===0){console.log("‚úÖ All content already cached, applying translations..."),this.applyCachedTranslations(e),this.updateLanguageState(e),window.showNotification(`‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô${e==="en"?"‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©":"‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏∑‡πà‡∏ô"}‡πÅ‡∏•‡πâ‡∏ß`,"success");return}this.showProgressNotification(n.length);const s=this.createBatches(n,this.batchSize);console.log(`üì¶ Created ${s.length} batches (max ${this.batchSize} items each)`);const o=new Map;if(await this.processBatchesConcurrently(s,e,o,r=>{this.translationProgress=Math.round(r/s.length*100),this.updateProgressNotification(r,s.length)}),o.size===0)throw new Error("‡∏Å‡∏≤‡∏£‡πÅ‡∏õ‡∏•‡∏†‡∏≤‡∏©‡∏≤‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏õ‡∏•‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢");this.applyTranslationsFromMap(o,e),this.applyCachedTranslations(e),this.updateLanguageState(e),console.log(`‚úÖ Successfully translated ${o.size}/${n.length} texts`),this.hideProgressNotification()},async processBatchesConcurrently(e,t,n,a){const s=this.maxConcurrentBatches;let o=0;for(let r=0;r<e.length;r+=s){const l=e.slice(r,r+s),u=l.map(async(c,g)=>{const f=r+g+1;console.log(`üì¶ Processing batch ${f}/${e.length} (${c.length} items)`);try{const i=await this.callTranslateAPI(c,t);if(i.success&&i.translations)return c.forEach((d,h)=>{i.translations[h]&&(n.set(d,i.translations[h]),this.translatedCache.set(`${d}-${t}`,i.translations[h]))}),console.log(`‚úÖ Batch ${f} completed: ${i.translations.length} translations`),!0;throw new Error(i.message||"Invalid API response")}catch(i){return console.error(`‚ùå Batch ${f} failed:`,i),!1}});await Promise.allSettled(u),o+=l.length,a(o),r+s<e.length&&await new Promise(c=>setTimeout(c,300))}},createBatches(e,t){const n=[];for(let a=0;a<e.length;a+=t)n.push(e.slice(a,a+t));return n},showProgressNotification(e){const t=Math.ceil(e/this.batchSize)*3;window.showNotification(`‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÅ‡∏õ‡∏•‡∏†‡∏≤‡∏©‡∏≤... ${e} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì ${t} ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)`,"info",t*1e3)},updateProgressNotification(e,t){const n=Math.round(e/t*100);window.showNotification(`‡πÅ‡∏õ‡∏•‡∏†‡∏≤‡∏©‡∏≤... ${n}% (${e}/${t} ‡∏ä‡∏∏‡∏î)`,"info",3e3)},hideProgressNotification(){window.showNotification("‚úÖ ‡πÅ‡∏õ‡∏•‡∏†‡∏≤‡∏©‡∏≤‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô!","success",2e3)},handleTranslationError(e){let t="‡∏Å‡∏≤‡∏£‡πÅ‡∏õ‡∏•‡∏†‡∏≤‡∏©‡∏≤‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á";e.message.includes("quota")||e.message.includes("‡πÄ‡∏Å‡∏¥‡∏ô")?t=e.message:e.message.includes("CSRF")&&(t="‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡πÅ‡∏•‡πâ‡∏ß‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà"),window.showNotification(t,"error")},async callTranslateAPI(e,t){var r,l,u,c,g,f;let n=(r=document.querySelector('meta[name="csrf-token"]'))==null?void 0:r.content;if(n||(n=((l=window.livewire)==null?void 0:l.token)||((c=(u=window.Livewire)==null?void 0:u.first())==null?void 0:c.token)),!n){const d=document.cookie.split(";").find(h=>h.trim().startsWith("XSRF-TOKEN="));d&&(n=decodeURIComponent(d.split("=")[1]))}if(!n)throw new Error("CSRF token not found. Please refresh the page.");console.log("üåê Calling translation API:",{count:e.length,target:t,sample:((g=e[0])==null?void 0:g.substring(0,30))+"..."});const s=await fetch("/api/translate-batch",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":n,"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({texts:e,target_language:t,source_language:"th"}),timeout:15e3});if(console.log(`üì° Response status: ${s.status}`),!s.ok){let i;try{i=await s.json()}catch{const h=await s.text();throw new Error(`Server error (${s.status}): ${h.substring(0,200)}`)}if(s.status===422){const d=i.errors?Object.entries(i.errors).map(([h,w])=>`${h}: ${w.join(", ")}`).join(`
`):i.message;throw new Error(`Validation error: ${d}`)}else throw s.status===429?new Error("‡πÄ‡∏Å‡∏¥‡∏ô‡πÇ‡∏Ñ‡∏ß‡∏ï‡πâ‡∏≤‡∏Å‡∏≤‡∏£‡πÅ‡∏õ‡∏•‡πÅ‡∏•‡πâ‡∏ß ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏†‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏á"):s.status===419?new Error("CSRF Token ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö"):new Error((i==null?void 0:i.message)||`Translation API error: ${s.status}`)}const o=await s.json();if(console.log("‚úÖ API Response received:",{success:o.success,translationsCount:((f=o.translations)==null?void 0:f.length)||Object.keys(o.translations||{}).length}),!o.success)throw new Error(o.message||"Translation API returned failure");return o},applyTranslationsFromMap(e,t){const n=document.querySelectorAll('[data-translate="true"]');let a=0;n.forEach(s=>{const o=s.getAttribute("data-original");o&&e.has(o)&&(s.textContent=e.get(o),a++)}),console.log(`üîß Applied ${a} fresh translations`)},applyCachedTranslations(e){if(e==="th"){this.restoreOriginalText();return}let t=0;document.querySelectorAll('[data-translate="true"]').forEach(n=>{const a=n.getAttribute("data-original");if(a){const s=`${a}-${e}`;this.translatedCache.has(s)&&(n.textContent=this.translatedCache.get(s),t++)}}),console.log(`‚úÖ Applied ${t} cached translations`)},restoreOriginalText(){document.querySelectorAll('[data-translate="true"]').forEach(e=>{const t=e.getAttribute("data-original");t&&(e.textContent=t)})},updateLanguageState(e){this.currentLang=e,localStorage.setItem("selectedLanguage",e),document.documentElement.lang=e;const t=e==="en"?"‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©":"‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏∑‡πà‡∏ô";window.showNotification(`‡πÅ‡∏õ‡∏•‡πÄ‡∏õ‡πá‡∏ô${t}‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!`,"success")},setLanguage(e){return this.translatePage(e)}})),Alpine.data("statisticsCounter",()=>({counters:[],init(){this.counters=Array.from(this.$el.querySelectorAll(".stats-counter")),this.setupCounterAnimation()},setupCounterAnimation(){const e=new IntersectionObserver(t=>{t.forEach(n=>{n.isIntersecting&&(this.animateCounters(),e.unobserve(n.target))})},{threshold:.5});e.observe(this.$el)},animateCounters(){this.counters.forEach((e,t)=>{const n=parseInt(e.dataset.target),a=e.dataset.suffix||"";setTimeout(()=>{this.animateCounter(n,a,e)},t*200)})},animateCounter(e,t,n){const s=performance.now(),o=r=>{const l=r-s,u=Math.min(l/2e3,1),c=this.easeOutCubic(u),g=Math.floor(e*c);n.textContent=g+t,u<1?requestAnimationFrame(o):n.textContent=e+t};requestAnimationFrame(o)},easeOutCubic(e){return 1-Math.pow(1-e,3)}})),Alpine.data("contactForm",()=>({formData:{name:"",email:"",phone:"",subject:"",message:""},loading:!1,errors:{},async submitForm(){var e;this.loading=!0,this.errors={};try{(await window.axios.post("/api/contact",this.formData)).data.success&&(this.showNotification("‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß! ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÄ‡∏£‡πá‡∏ß‡πÜ ‡∏ô‡∏µ‡πâ","success"),this.resetForm())}catch(t){((e=t.response)==null?void 0:e.status)===422?this.errors=t.response.data.errors:this.showNotification("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á","error")}finally{this.loading=!1}},resetForm(){this.formData={name:"",email:"",phone:"",subject:"",message:""}},showNotification(e,t){var n;(n=window.showNotification)==null||n.call(window,e,t)}})),Alpine.data("animateOnScroll",(e={})=>({isVisible:!1,hasAnimated:!1,init(){const n={...{threshold:.1,rootMargin:"0px 0px -50px 0px",once:!0},...e},a=new IntersectionObserver(s=>{s.forEach(o=>{o.isIntersecting&&(!this.hasAnimated||!n.once)?(this.isVisible=!0,this.hasAnimated=!0,n.once&&a.unobserve(this.$el)):n.once||(this.isVisible=!1)})},n);a.observe(this.$el)}})),Alpine.store("app",{loading:!1,theme:localStorage.getItem("theme")||"light",language:document.documentElement.lang||"th",setLoading(e){this.loading=e},toggleTheme(){this.theme=this.theme==="light"?"dark":"light",localStorage.setItem("theme",this.theme),document.documentElement.classList.toggle("dark",this.theme==="dark")},setLanguage(e){this.language=e,document.documentElement.lang=e},init(){document.documentElement.classList.toggle("dark",this.theme==="dark"),document.documentElement.lang=this.language}}),Alpine.store("app").init(),window.pageTranslator={setLanguage:e=>{console.log("üåç Global translator called for language:",e),p&&clearTimeout(p),p=setTimeout(()=>{const t=document.querySelectorAll('[x-data*="pageTranslator"]');if(t.length>0){const n=t[0];n._x_dataStack&&n._x_dataStack[0]&&n._x_dataStack[0].translatePage(e)}else console.warn("No pageTranslator elements found")},100)},translatePage:e=>{console.log("üåç Direct translatePage called for language:",e);const t=document.querySelectorAll('[x-data*="pageTranslator"]');if(t.length>0){const n=t[0];n._x_dataStack&&n._x_dataStack[0]?n._x_dataStack[0].translatePage(e):console.error("PageTranslator instance not found")}else console.error("No pageTranslator elements found")}},Livewire.on("notify",e=>{e.message&&window.showNotification(e.message,e.type||"info")}),Livewire.on("language-changed",e=>{if(console.log("üì° Language change event received:",e),m){console.log("üö´ Translation in progress, ignoring language change event");return}let t,n;Array.isArray(e)&&e.length>0?(t=e[0].locale||e[0].language,n=e[0].from):typeof e=="object"&&(t=e.locale||e.language,n=e.from),console.log("üìù Extracted data:",{locale:t,from:n}),t&&window.pageTranslator&&typeof window.pageTranslator.setLanguage=="function"?window.pageTranslator.setLanguage(t):console.error("‚ùå Invalid language data or pageTranslator not available",{locale:t,data:e})})});window.showNotification=function(e,t="info",n=null){document.querySelectorAll(`.notification-${t}`).forEach(r=>r.remove());const a=document.createElement("div");a.className=`notification-${t} fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg transition-all duration-300 transform translate-x-full max-w-sm ${t==="success"?"bg-green-500 text-white":t==="error"?"bg-red-500 text-white":t==="warning"?"bg-yellow-500 text-white":"bg-blue-500 text-white"}`;const s=t==="success"?"fa-check-circle":t==="error"?"fa-exclamation-circle":t==="warning"?"fa-exclamation-triangle":"fa-info-circle";a.innerHTML=`
        <div class="flex items-center">
            <i class="fas ${s} mr-2 flex-shrink-0"></i>
            <span class="text-sm">${e}</span>
            <button onclick="this.parentElement.parentElement.remove()" class="ml-3 hover:opacity-70 flex-shrink-0">
                <i class="fas fa-times text-xs"></i>
            </button>
        </div>
    `,document.body.appendChild(a),setTimeout(()=>{a.classList.remove("translate-x-full")},100),setTimeout(()=>{a.parentElement&&(a.classList.add("translate-x-full"),setTimeout(()=>a.remove(),300))},n||(t==="error"?8e3:t==="warning"?6e3:4e3))};document.addEventListener("livewire:init",()=>{Livewire.on("navigating",()=>{Alpine.store("app").setLoading(!0)}),Livewire.on("navigated",()=>{Alpine.store("app").setLoading(!1),setTimeout(()=>{document.querySelectorAll('[x-data*="pageTranslator"]').forEach(t=>{t._x_dataStack&&t._x_dataStack[0]&&t._x_dataStack[0].markTranslatableElements&&t._x_dataStack[0].markTranslatableElements()})},100)})});document.addEventListener("DOMContentLoaded",()=>{if(document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){var a;t.preventDefault();const n=document.querySelector(this.getAttribute("href"));if(n){const s=((a=document.querySelector("header"))==null?void 0:a.offsetHeight)||0,o=n.offsetTop-s-20;window.scrollTo({top:o,behavior:"smooth"})}})}),document.querySelectorAll('a[target="_blank"]').forEach(e=>{e.rel.includes("noopener")||(e.rel+=" noopener noreferrer")}),document.addEventListener("keydown",e=>{e.key==="Escape"&&document.querySelectorAll("[x-show]").forEach(t=>{t.style.display!=="none"&&t.dispatchEvent(new CustomEvent("close"))})}),"IntersectionObserver"in window){const e=document.querySelectorAll("img[data-src]"),t=new IntersectionObserver(n=>{n.forEach(a=>{if(a.isIntersecting){const s=a.target;s.src=s.dataset.src,s.classList.remove("opacity-0"),s.classList.add("opacity-100"),t.unobserve(s)}})});e.forEach(n=>t.observe(n))}});console.log(`
üî• SAKON Welding Services
Built with Laravel 12 + Livewire 3.6 + Alpine.js + Tailwind CSS 4.1
Translation System: Enhanced & Optimized with Performance Boost
Performance optimized and ready for production!
`);
